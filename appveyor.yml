os: Windows Server 2012 R2
    
environment:
  PATH: C:\MinGW\msys\1.0\bin;C:\MinGW\bin;C:\Program Files (x86)\Mono-3.2.3\bin;C:\Python27\scripts;%PATH%  
  SDK_BUILD: 258
  matrix:
    - build_platform: "x86"
      build_compiler: "mingw"
      build_bindings: 1
      SDK_VERSION: 2.0.0
    - build_platform: "x86"
      build_compiler: "mingw"
      build_bindings: 1
      SDK_VERSION: 1.5.0

# cache:
#   - src/  # preserve "packages" directory in the root of build folder but will reset it if packages.config is modified
install:
  - ps: >-
      if($env:SDK_VERSION -eq '1.5.0') {
         choco install esp8266-udk --source https://www.myget.org/F/kireevco-chocolatey/ -y --no-progress
         mkdir c:\Espressif\utils\ESP8266
         cp c:\Espressif\utils\memanalyzer.exe c:\Espressif\utils\ESP8266\memanalyzer.exe
         cp c:\Espressif\utils\esptool.exe c:\Espressif\utils\ESP8266\esptool.exe
      }
      else {
         choco install esp8266-udk --source https://www.myget.org/F/sming/ -y --no-progress
      }
  - cmd: mingw-get update
  - cmd: mingw-get upgrade

build_script:
  - cmd: .appveyor/build.cmd
