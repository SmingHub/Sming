# os: Windows Server 2019 

image:
  - Visual Studio 2019

environment:
  SMINGTOOLS: https://github.com/SmingHub/SmingTools/releases/download/1.0
  PATH: c:\mingw\bin;c:\mingw\msys\1.0\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\7-Zip;C:\Program Files (x86)\CMake\bin;C:\Python27;C:\Python27\Scripts;C:\Tools\curl\bin;C:\Program Files\PowerShell\6\;C:\Program Files\Git\cmd;C:\Program Files\Git\usr\bin
  PSMODULEPATH: C:\Program Files\WindowsPowerShell\Modules;C:\Windows\system32\WindowsPowerShell\v1.0\Modules;C:\Program Files\AppVeyor\BuildAgent\Modules;C:\Users\appveyor\Documents\WindowsPowerShell\Modules;C:\Program Files (x86)\Microsoft SQL Server\140\Tools\PowerShell\Modules\;C:\Program Files (x86)\Microsoft SQL Server\150\Tools\PowerShell\Modules\;C:\Program Files (x86)\Google\Cloud SDK\google-cloud-sdk\platform\PowerShell
  UDK_ROOT: C:\Espressif
  EQT_ROOT: C:\esp-quick-toolchain
  matrix:
    - build_platform: "x86"
      build_compiler: "mingw"
      SMING_ARCH: Host

# cache:
#   - src/  # preserve "packages" directory in the root of build folder but will reset it if packages.config is modified
install:
  - cmd: .appveyor/install.cmd

build_script:
  - cmd: .appveyor/build.cmd

on_finish:
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
