image:
  - Ubuntu
  - Windows Server 2012 R2

platform: x86

environment:
  SMINGTOOLS: https://github.com/SmingHub/SmingTools/releases/download/1.0

for:
-
  matrix:
    only:
      - image: Windows Server 2012 R2

  environment:
    PATH: C:\MinGW\msys\1.0\bin;C:\MinGW\bin;%PATH%
    PYTHON: C:\Python38\python
    UDK_ROOT: C:\Espressif
    EQT_ROOT: C:\esp-quick-toolchain

  build_script:
    - cmd: .appveyor/build.cmd
  
-
  matrix:
    only:
      - image: Ubuntu

  environment:
    UDK_ROOT: $APPVEYOR_BUILD_FOLDER/opt/esp-alt-sdk
    EQT_ROOT: $APPVEYOR_BUILD_FOLDER/opt/esp-quick-toolchain

  build_script:
    - sh: .appveyor/build.sh

# cache:
#   - src/  # preserve "packages" directory in the root of build folder but will reset it if packages.config is modified
install:
  - cmd: .appveyor/install.cmd
  - sh: .appveyor/install.sh

